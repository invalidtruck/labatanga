{"version":3,"sources":["../../src/pages/provider/prov-request/prov-request.module.ts","../../src/pages/provider/prov-request/prov-request.ts","../../src/pages/provider/request-detail/request-detail.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProvRequestPage } from './prov-request';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProvRequestPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProvRequestPage),\r\n  ],\r\n})\r\nexport class ProvRequestPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/provider/prov-request/prov-request.module.ts","import { IContracted } from './../../../services/Models';\r\nimport { Observable } from 'rxjs';\r\nimport { RequestDetailPage } from '../request-detail/request-detail';\r\nimport { Component } from '@angular/core';\r\nimport { ModalController, IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { map } from 'rxjs/operators';\r\nimport { AngularFirestore } from 'angularfire2/firestore';\r\n\r\n/**\r\n * Generated class for the ProvRequestPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-prov-request',\r\n  templateUrl: 'prov-request.html',\r\n})\r\nexport class ProvRequestPage {\r\n  Contracts: Observable<any>\r\n  uid: String\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    private afDB: AngularFirestore) {\r\n    this.uid = navParams.data;\r\n    this.Contracts = this.afDB.collection<IContracted>(\"Providers/\" + this.uid + \"/Contracts\",\r\n      ref => ref.where(\"status\", \"==\", \"A\"))\r\n      .snapshotChanges().pipe(\r\n        map(items => {\r\n          return items.map(com => {\r\n            let con = com.payload.doc.data()\r\n            return {\r\n              key: con.$key,\r\n              // user: this.afDB.doc(\"Users/\" + con..UserID).valueChanges(),\r\n              // Description: com.payload,\r\n              // timestamp: com.payload.val().timestamp,\r\n              time: con.contracted_date\r\n            }\r\n          })\r\n        })\r\n      )\r\n  }\r\n\r\n  onAccept(key: string) {\r\n    var contract = this.afDB.doc(\"Providers/\" + this.uid + \"/Contracts/\" + key)\r\n    contract.update({\r\n      status: \"D\",\r\n      composeview: \"D_true\",\r\n      viewed: true\r\n    })\r\n  }\r\n  onReview(key: String) {\r\n    var contract = this.afDB.doc(\"Providers/\" + this.uid + \"/Contracts/\" + key)\r\n    contract.update({\r\n      composeview: \"A_true\",\r\n      viewed: true\r\n    })\r\n    let profileModal = this.modalCtrl.create(RequestDetailPage, { uid: this.uid, key: key });\r\n    profileModal.present();\r\n  }\r\n  onCancel(key: string) {\r\n    var contract = this.afDB.doc(\"Providers/\" + this.uid + \"/Contracts/\" + key)\r\n    contract.update({\r\n      status: \"C\",\r\n      composeview: \"C_true\",\r\n      viewed: true\r\n    })\r\n  }\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ProvRequestPage');\r\n  }\r\n\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/provider/prov-request/prov-request.ts","\r\nimport { Observable } from 'rxjs';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFirestore } from 'angularfire2/firestore';\r\nimport { IContracted, IUser } from '../../../services/Models';\r\nimport { UserSCV } from '../../../Providers/User';\r\nimport { map } from 'rxjs/operators';\r\n\r\n// @IonicPage()\r\n@Component({\r\n  selector: 'page-request-detail',\r\n  templateUrl: 'request-detail.html',\r\n})\r\nexport class RequestDetailPage {\r\n  public uid: string\r\n  public request: any\r\n  public user: IUser\r\n  constructor(public navCtrl: NavController, public afDB: AngularFirestore, public usrsvc: UserSCV,\r\n    public navParams: NavParams) {\r\n    this.uid = navParams.get(\"uid\")\r\n    usrsvc.getUser().toPromise().then(e => { \r\n      // let key = navParams.get(\"key\")\r\n    this.afDB.doc<IContracted>(\"Providers/\" + this.uid + \"/Contracts/\" + e.$key)\r\n        .snapshotChanges().subscribe(s => {\r\n          this.request = s.payload.data()\r\n          this.getUser(s.payload.data().UserID)\r\n        })\r\n    }) \r\n  }\r\n  private getUser(UserID: string) {\r\n    let subuser = this.afDB.collection<IUser>(\"Users\").doc(UserID).snapshotChanges()\r\n      .subscribe(s => {\r\n        this.user = s.payload.data() as IUser\r\n      })\r\n  }\r\n\r\n  getUserName(user: IUser) { return user ? user.FirstName + \" \" + user.LastName + \" \" + user.LastName2 : \"\" }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad RequestDetailPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/provider/request-detail/request-detail.ts"],"sourceRoot":""}